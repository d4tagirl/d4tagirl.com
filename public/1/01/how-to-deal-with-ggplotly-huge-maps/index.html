<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		 
			
  
    <meta name="twitter:card" content="summary"/>
    
      <meta name="twitter:image" content="/images/avatar.png" />
    
  
  
  <meta name="twitter:title" content="How to deal with ggplotly huge maps"/>
  <meta name="twitter:description" content="How I had to go from gglotly to plotly::plot_geo to reduce the size of the HTML output for posting interactive maps on my blog."/>
  
    <meta name="twitter:site" content="@your_twitter_id"/>
  
  
  
  
    <meta name="twitter:creator" content="@site_author"/>
  



		
		<meta name="author" content="site_author">
		<meta name="description" content="Site Description">
		<meta name="generator" content="Hugo 0.59.1" />
		<title>How to deal with ggplotly huge maps &middot; d4tagirl</title>
		<link rel="shortcut icon" href="/images/favicon.ico">
		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/css/highlight.css">

		
		<link rel="stylesheet" href="/css/font-awesome.min.css">
		

		
		<link href="/index.xml" rel="alternate" type="application/rss+xml" title="d4tagirl" />
		

		
	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='/'> <span class="arrow">‚Üê</span>Home</a>
	
	<a href='/posts'>Archive</a>
	<a href='/tags'>Tags</a>
	<a href='/about'>About</a>

	

	
	<a class="cta" href="/index.xml">Subscribe</a>
	
</nav>


        <section id="wrapper" class="post">
            <article>
                <header>
                    <h1>
                        How to deal with ggplotly huge maps
                    </h1>
                    <h2 class="headline">
                    Jan 1, 0001 00:00
                    ¬∑ 1433 words
                    ¬∑ 7 minute read
                      <span class="tags">
                      
                      
                          
                              <a href="/tags/rstats">rstats</a>
                          
                              <a href="/tags/r">r</a>
                          
                              <a href="/tags/plotly">plotly</a>
                          
                              <a href="/tags/ggplotly">ggplotly</a>
                          
                              <a href="/tags/maps">maps</a>
                          
                              <a href="/tags/plot_geo">plot_geo</a>
                          
                      
                      
                      </span>
                    </h2>
                </header>
                
                  
                    <div id="toc">
                      <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#the-data">The data</a></li>
<li><a href="#using-ggplotly">Using ggplotly</a></li>
</ul></li>
</ul>
</nav>
                    </div>
                  
                
                <section id="post-body">
                    <p>How I had to go from <code>gglotly</code> to <code>plotly::plot_geo</code> to reduce the size of the HTML output for posting interactive maps on my blog.</p>

<p>This is the second one of the 3-posts-series, where I go from fetching Twitter users and preparing the data to visualizing it (If I wanted to show everything I&rsquo;ve done in a single post, it would be almost as long as my first one! And believe me: nobody wants that üòù ):</p>

<ol>
<li><a href="{% post_url 2017-04-20-how-to-fetch-twitter-users-with-r %}">How to fetch Twitter users with R</a>: the title is kind of self explanatory&hellip;</li>
<li>How to deal with ggplotly huge maps: this one, where I go through the details of why I chose not to use <code>ggplotly</code> and use <code>plot_geo</code> instead to generate the HTML.</li>
<li><a href="{% post_url 2017-04-24-how-to-plot-animated-maps-with-gganimate %}">How to plot animated maps with gganimate</a>: again, pretty obvious subject.</li>
</ol>

<p>Finally <a href="{% post_url 2017-05-10-visualizing-r-ladies-growth %}">I present my favourite visualization here</a>.</p>

<h2 id="motivation">Motivation</h2>

<p>For this series I&rsquo;ve been experimenting with interactive maps and animated ones these past few days and I finally was able to produce some fancy outputs using the <code>plotly</code> package and the <code>gganimate</code> one. You can see the whole process <a href="https://github.com/d4tagirl/R-Ladies-growth-maps">in my GitHub repo</a>. Everything was working perfectly on RStudio, until I wanted to share my results on my blog, and <em>things got complicated</em>. Originally I produced some interactive maps using the <code>plotly::ggplotly</code> function and it generated a 3.3 MB HTML&hellip; and <em>that&rsquo;s an issue</em> when you want to include it on a website üò≥ . So I tried a different approach: using the <code>plotly::plot_geo</code> function I was able to produce a very similar plot, generating a way smaller HTML.</p>

<h2 id="the-data">The data</h2>

<p>I&rsquo;m using the <a href="{% post_url 2017-04-20-how-to-fetch-twitter-users-with-r %}">data produced in this previous post</a>. Let&rsquo;s take a look at it to see what we are dealing with.</p>

<pre><code class="language-r">library(readr)
library(dplyr)

url_csv &lt;- 'https://raw.githubusercontent.com/d4tagirl/R-Ladies-growth-maps/master/rladies.csv'
rladies &lt;- read_csv(url(url_csv)) %&gt;% 
  select(-1)

library(DT)
datatable(rladies, rownames = FALSE,
          options = list(pageLength = 5))
</code></pre>

<p><!--html_preserve--><div id="htmlwidget-84b08d40edc14555d2ba" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-84b08d40edc14555d2ba">{&ldquo;x&rdquo;:{&ldquo;filter&rdquo;:&ldquo;none&rdquo;,&ldquo;data&rdquo;:[[&ldquo;RLadiesSF&rdquo;,&ldquo;RLadiesNYC&rdquo;,&ldquo;RLadiesIstanbul&rdquo;,&ldquo;RLadiesBCN&rdquo;,&ldquo;RLadiesColumbus&rdquo;,&ldquo;RLadiesBoston&rdquo;,&ldquo;RLadiesLA&rdquo;,&ldquo;RLadiesLondon&rdquo;,&ldquo;RLadiesAU&rdquo;,&ldquo;RLadiesParis&rdquo;,&ldquo;RLadiesLx&rdquo;,&ldquo;RLadiesBerlin&rdquo;,&ldquo;RLadiesRTP&rdquo;,&ldquo;RLadiesCT&rdquo;,&ldquo;RLadiesValencia&rdquo;,&ldquo;RLadiesNash&rdquo;,&ldquo;RLadiesAustin&rdquo;,&ldquo;RLadiesAmes&rdquo;,&ldquo;RLadiesDC&rdquo;,&ldquo;RLadiesBA&rdquo;,&ldquo;RLadiesLdnOnt&rdquo;,&ldquo;RLadiesManchest&rdquo;,&ldquo;RLadiesDublin&rdquo;,&ldquo;RLadiesLima&rdquo;,&ldquo;RLadiesTbilisi&rdquo;,&ldquo;RLadiesAdelaide&rdquo;,&ldquo;RLadiesMunich&rdquo;,&ldquo;RLadiesSR&rdquo;,&ldquo;RLadiesMAD&rdquo;,&ldquo;RLadiesTC&rdquo;,&ldquo;RLadiesBudapest&rdquo;,&ldquo;RLadiesIzmir&rdquo;,&ldquo;RLadiesCapeTown&rdquo;,&ldquo;RLadiesRio&rdquo;,&ldquo;RLadiesMTL&rdquo;,&ldquo;RLadiesSeattle&rdquo;,&ldquo;RLadiesTaipei&rdquo;,&ldquo;RLadiesWarsaw&rdquo;],[&ldquo;San Francisco&rdquo;,&ldquo;New York&rdquo;,&ldquo;ƒ∞stanbul, T√ºrkiye&rdquo;,&ldquo;Barcelona, Spain&rdquo;,&ldquo;Columbus, OH&rdquo;,&ldquo;Boston, MA&rdquo;,&ldquo;Los Angeles, CA&rdquo;,&ldquo;London, England&rdquo;,&ldquo;Melbourne, Victoria&rdquo;,&ldquo;Paris, France&rdquo;,&ldquo;Lisbon&rdquo;,&ldquo;Berlin, Deutschland&rdquo;,&ldquo;Durham, NC&rdquo;,&ldquo;Connecticut, USA&rdquo;,&ldquo;Valencia, Espa√±a&rdquo;,&ldquo;Nashville, TN&rdquo;,&ldquo;Austin, TX&rdquo;,&ldquo;Ames, IA&rdquo;,&ldquo;Washington, DC&rdquo;,&ldquo;Buenos Aires, Argentina&rdquo;,&ldquo;London, Ontario&rdquo;,&ldquo;Manchester, England&rdquo;,&ldquo;Dublin City, Ireland&rdquo;,&ldquo;Lima, Peru&rdquo;,&ldquo;Tbilisi&rdquo;,&ldquo;Adelaide, South Australia&rdquo;,&ldquo;Munich, Bavaria&rdquo;,&ldquo;Santa Rosa, Argentina&rdquo;,&ldquo;Madrid, Spain&rdquo;,&ldquo;Twin Cities&rdquo;,&ldquo;Budapest, Magyarorsz√°g&rdquo;,&ldquo;Izmir, Turkey&rdquo;,&ldquo;Cape Town, South Africa&rdquo;,&ldquo;Rio de Janeiro, Brazil&rdquo;,&ldquo;Montreal&rdquo;,&ldquo;Seattle&rdquo;,&ldquo;Taipei&rdquo;,&ldquo;Warsaw&rdquo;],[&ldquo;2012-10-15&rdquo;,&ldquo;2016-09-01&rdquo;,&ldquo;2016-09-06&rdquo;,&ldquo;2016-10-11&rdquo;,&ldquo;2016-10-04&rdquo;,&ldquo;2016-09-06&rdquo;,&ldquo;2016-08-29&rdquo;,&ldquo;2016-04-20&rdquo;,&ldquo;2016-09-02&rdquo;,&ldquo;2016-09-19&rdquo;,&ldquo;2016-10-26&rdquo;,&ldquo;2016-10-03&rdquo;,&ldquo;2016-06-28&rdquo;,&ldquo;2016-11-24&rdquo;,&ldquo;2016-11-13&rdquo;,&ldquo;2016-09-28&rdquo;,&ldquo;2016-12-15&rdquo;,&ldquo;2016-11-30&rdquo;,&ldquo;2016-12-08&rdquo;,&ldquo;2017-01-05&rdquo;,&ldquo;2017-01-19&rdquo;,&ldquo;2016-10-08&rdquo;,&ldquo;2017-01-21&rdquo;,&ldquo;2016-10-08&rdquo;,&ldquo;2016-11-29&rdquo;,&ldquo;2017-02-20&rdquo;,&ldquo;2017-03-21&rdquo;,&ldquo;2017-04-06&rdquo;,&ldquo;2016-09-03&rdquo;,&ldquo;2015-04-04&rdquo;,&ldquo;2017-01-23&rdquo;,&ldquo;2016-10-19&rdquo;,&ldquo;2017-03-06&rdquo;,&ldquo;2017-01-15&rdquo;,&ldquo;2017-04-13&rdquo;,&ldquo;2017-05-06&rdquo;,&ldquo;2014-11-15&rdquo;,&ldquo;2016-11-15&rdquo;],[916,309,436,377,179,259,320,1154,415,253,199,202,220,141,151,182,113,130,128,217,92,137,84,54,100,58,58,33,473,86,73,88,54,32,1,0,347,80],[1672.91666666667,255.875,250.875,215.875,222.875,250.875,258.875,389.875,254.875,237.875,200.875,223.875,320.875,171.875,182.875,228.875,150.875,165.875,157.875,129.875,115.875,218.875,113.875,218.875,166.875,83.875,54.875,38.875,253.875,771.875,111.875,207.875,69.875,119.875,31.875,8.875,911.916666666667,180.875],[-122.4194155,-74.0059413,28.9783589,2.1734035,-82.9987942,-71.0588801,-118.2436849,-0.1277583,144.9630576,2.3522219,-9.1393366,13.404954,-78.898619,-73.087749,-0.3762881,-86.7816016,-97.7430608,-93.6319131,-77.0368707,-58.3815591,-81.2452768,-2.2426305,-6.2603097,-77.042754,44.827096,138.6007456,11.5819806,-64.2912369,-3.7037902,-93.2009998,19.040235,27.142826,18.4240553,-43.1728965,-73.567256,-122.3320708,121.5654177,21.0122287],[37.7749295,40.7127837,41.0082376,41.3850639,39.9611755,42.3600825,34.0522342,51.5073509,-37.8136276,48.856614,38.7222524,52.5200066,35.9940329,41.6032207,39.4699075,36.1626638,30.267153,42.0307812,38.9071923,-34.6036844,42.9849233,53.4807593,53.3498053,-12.0463731,41.7151377,-34.9284989,48.1351253,-36.620922,40.4167754,44.9374831,47.497912,38.423734,-33.9248685,-22.9068467,45.5016889,47.6062095,25.0329694,52.2296756]],&ldquo;container&rdquo;:&rdquo;<table class=\"display\">\n  <thead>\n    <tr>\n      <th>screen_name&lt;\/th&gt;\n      <th>location&lt;\/th&gt;\n      <th>created_at&lt;\/th&gt;\n      <th>followers&lt;\/th&gt;\n      <th>age_days&lt;\/th&gt;\n      <th>lon&lt;\/th&gt;\n      <th>lat&lt;\/th&gt;\n    &lt;\/tr&gt;\n  &lt;\/thead&gt;\n&lt;\/table&gt;&ldquo;,&ldquo;options&rdquo;:{&ldquo;pageLength&rdquo;:5,&ldquo;columnDefs&rdquo;:[{&ldquo;className&rdquo;:&ldquo;dt-right&rdquo;,&ldquo;targets&rdquo;:[3,4,5,6]}],&ldquo;order&rdquo;:[],&ldquo;autoWidth&rdquo;:false,&ldquo;orderClasses&rdquo;:false,&ldquo;lengthMenu&rdquo;:[5,10,25,50,100]},&ldquo;selection&rdquo;:{&ldquo;mode&rdquo;:&ldquo;multiple&rdquo;,&ldquo;selected&rdquo;:null,&ldquo;target&rdquo;:&ldquo;row&rdquo;}},&ldquo;evals&rdquo;:[],&ldquo;jsHooks&rdquo;:[]}</script><!--/html_preserve--></p>

<p><br />
This dataframe is about R-Ladies&rsquo; chapters&rsquo; Twitter accounts. I want to produce a <code>plotly</code> map where I can plot each chapter according to its location (<code>lon</code> and <code>lat</code>), with each point&rsquo;s size indicating its number of <code>followers</code>.</p>

<h2 id="using-ggplotly">Using ggplotly</h2>

<p>The first thing I did was generate the map using <code>ggplot2</code>, because <code>plotly</code> integrates easily with it with the <code>ggplotly</code> function. And I&rsquo;m so comfortable using the <code>tidyverse</code>, that it was the natural thing for me to do!</p>

<p><code>ggplotly</code> translates the <code>ggplot2</code> object into a <code>plotly</code> one, displaying the aesthetic mappings in the tooltip. As I wanted to include other variables in it, I added the extra (and <em>unofficial</em>) <code>text</code> aesthetic for <code>ggplotly</code> to include them. As <code>ggplot2</code> doesn&rsquo;t have a <code>text</code> aesthetic it ignores it, but <code>ggplotly</code> recognizes it and displays it in the tooltip.</p>

<p>The greatest thing about the <code>text</code> aesthetic is that you can include more than one variable outside the <code>ggplot</code> aesthetics to display, as shown below.</p>

<pre><code class="language-r">library(ggplot2)
library(maps)
library(ggthemes)

world &lt;- ggplot() +
  borders(&quot;world&quot;, colour = &quot;gray85&quot;, fill = &quot;gray80&quot;) +
  theme_map()

map &lt;- world +
  geom_point(aes(x = lon, y = lat,
                 text = paste('city: ', location,
                              '&lt;br /&gt; created : ', created_at),
                 size = followers),
             data = rladies, colour = 'purple', alpha = .5) +
  scale_size_continuous(range = c(1, 8), breaks = c(250, 500, 750, 1000)) +
  labs(size = 'Followers')
</code></pre>

<p><img src="/figure/source/how-to-deal-with-ggplotly-huge-maps/2017-04-26-how-to-deal-with-ggplotly-huge-maps/static_map-1.png" style="display: block; margin: auto;" /></p>

<p>This is the static map that I&rsquo;m animating using <code>ggplotly</code>, with the following code:</p>

<pre><code class="language-r">library(plotly)

ggplotly(map, tooltip = c('text', 'size'))
</code></pre>

<p>If you want to see this map <a href="{% post_url 2017-04-24-huge-ggplotly-map %}">you can check it out here</a>{:target=&rdquo;_blank&rdquo;}, but it will take a while! It is a 3.3 MB page (1.2 MB gzipped)!</p>

<p>It&rsquo;s a pretty nice map (and super easy to produce!), but it takes forever to load the HTML! And that is why I checked how the <code>plotly</code> people make this kind of plots from scratch, and I gave it a try.</p>

<p>It is actually pretty easy! The only thing that was not that straightforward for me was finding the chart references for customizing the maps (probably because I was doing a bad job at searching for them üò≥ ), so <a href="https://plot.ly/r/reference/">here is the link</a>, and for the layout in particular <a href="https://plot.ly/r/reference/#layout-geo/">here it is this other link</a> just in case you encounter the same difficulties as I did.</p>

<pre><code class="language-r">g &lt;- list(showframe = FALSE,
          coastlinecolor = toRGB(&quot;white&quot;),
          showland = TRUE,
          landcolor = toRGB(&quot;gray80&quot;),
          showcountries = TRUE,
          countrycolor = toRGB(&quot;white&quot;),
          countrywidth = 0.2,
          projection = list(type = 'Mercator'))

plot_geo(rladies,
         marker = list(color = toRGB(&quot;purple&quot;),
                       opacity = 0.5,
                       line = list(color = toRGB(&quot;purple&quot;),
                                   width = 1.5))) %&gt;%
  add_markers(x = ~lon,
              y = ~lat,
              sizes = c(1, 450),
              size = ~followers,
              hoverinfo = &quot;text&quot;,
              text = ~paste('city: ', location,
                            '&lt;br /&gt; created: ', created_at,
                            '&lt;br /&gt; followers: ', followers)) %&gt;%
  layout(geo = g)
</code></pre>

<p><!--html_preserve--><div id="htmlwidget-f58869de25fe8fa3f84f" style="width:910px;height:520px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-f58869de25fe8fa3f84f">{&ldquo;x&rdquo;:{&ldquo;layout&rdquo;:{&ldquo;margin&rdquo;:{&ldquo;b&rdquo;:40,&ldquo;l&rdquo;:60,&ldquo;t&rdquo;:25,&ldquo;r&rdquo;:10},&ldquo;mapType&rdquo;:&ldquo;geo&rdquo;,&ldquo;geo&rdquo;:{&ldquo;domain&rdquo;:{&ldquo;x&rdquo;:[0,1],&ldquo;y&rdquo;:[0,1]},&ldquo;showframe&rdquo;:false,&ldquo;coastlinecolor&rdquo;:&ldquo;rgba(255,255,255,1)&rdquo;,&ldquo;showland&rdquo;:true,&ldquo;landcolor&rdquo;:&ldquo;rgba(204,204,204,1)&rdquo;,&ldquo;showcountries&rdquo;:true,&ldquo;countrycolor&rdquo;:&ldquo;rgba(255,255,255,1)&rdquo;,&ldquo;countrywidth&rdquo;:0.2,&ldquo;projection&rdquo;:{&ldquo;type&rdquo;:&ldquo;Mercator&rdquo;}}},&ldquo;source&rdquo;:&ldquo;A&rdquo;,&ldquo;config&rdquo;:{&ldquo;modeBarButtonsToAdd&rdquo;:[{&ldquo;name&rdquo;:&ldquo;Collaborate&rdquo;,&ldquo;icon&rdquo;:{&ldquo;width&rdquo;:1000,&ldquo;ascent&rdquo;:500,&ldquo;descent&rdquo;:-50,&ldquo;path&rdquo;:&ldquo;M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z&rdquo;},&ldquo;click&rdquo;:&ldquo;function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == &lsquo;?viewer_pane=1&rsquo;) {\n          alert(&lsquo;To learn about plotly for collaboration, visit:\n <a href="https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');n">https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');n</a>        } else {\n          window.open(&lsquo;<a href="https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html'">https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html'</a>, &lsquo;_blank&rsquo;);\n        }\n      }&ldquo;}],&ldquo;modeBarButtonsToRemove&rdquo;:[&ldquo;sendDataToCloud&rdquo;]},&ldquo;data&rdquo;:[{&ldquo;marker&rdquo;:{&ldquo;size&rdquo;:[357.398613518198,121.226169844021,170.639514731369,147.683708838822,70.6455805892548,101.772097053726,125.506065857886,450,162.468804159445,99.4376083188908,78.4272097053726,79.5944540727903,86.5979202772964,55.8604852686308,59.7512998266898,71.8128249566724,44.9662045060659,51.580589254766,50.8024263431542,85.4306759098787,36.7954939341421,54.3041594454073,33.682842287695,22.0103986135182,39.9081455805893,23.5667244367418,23.5667244367418,13.8396880415945,185.035528596187,34.4610051993068,29.4029462738302,35.2391681109185,22.0103986135182,13.4506065857886,1.38908145580589,1,136.011265164645,32.1265164644714],&ldquo;sizemode&rdquo;:&ldquo;area&rdquo;,&ldquo;fillcolor&rdquo;:&ldquo;rgba(31,119,180,1)&rdquo;,&ldquo;color&rdquo;:&ldquo;rgba(160,32,240,1)&rdquo;,&ldquo;opacity&rdquo;:0.5,&ldquo;line&rdquo;:{&ldquo;color&rdquo;:&ldquo;rgba(160,32,240,1)&rdquo;,&ldquo;width&rdquo;:1.5}},&ldquo;type&rdquo;:&ldquo;scattergeo&rdquo;,&ldquo;mode&rdquo;:&ldquo;markers&rdquo;,&ldquo;hoverinfo&rdquo;:&ldquo;text&rdquo;,&ldquo;text&rdquo;:[&ldquo;city:  San Francisco <br /> created:  2012-10-15 <br /> followers:  916&rdquo;,&ldquo;city:  New York <br /> created:  2016-09-01 <br /> followers:  309&rdquo;,&ldquo;city:  ƒ∞stanbul, T√ºrkiye <br /> created:  2016-09-06 <br /> followers:  436&rdquo;,&ldquo;city:  Barcelona, Spain <br /> created:  2016-10-11 <br /> followers:  377&rdquo;,&ldquo;city:  Columbus, OH <br /> created:  2016-10-04 <br /> followers:  179&rdquo;,&ldquo;city:  Boston, MA <br /> created:  2016-09-06 <br /> followers:  259&rdquo;,&ldquo;city:  Los Angeles, CA <br /> created:  2016-08-29 <br /> followers:  320&rdquo;,&ldquo;city:  London, England <br /> created:  2016-04-20 <br /> followers:  1154&rdquo;,&ldquo;city:  Melbourne, Victoria <br /> created:  2016-09-02 <br /> followers:  415&rdquo;,&ldquo;city:  Paris, France <br /> created:  2016-09-19 <br /> followers:  253&rdquo;,&ldquo;city:  Lisbon <br /> created:  2016-10-26 <br /> followers:  199&rdquo;,&ldquo;city:  Berlin, Deutschland <br /> created:  2016-10-03 <br /> followers:  202&rdquo;,&ldquo;city:  Durham, NC <br /> created:  2016-06-28 <br /> followers:  220&rdquo;,&ldquo;city:  Connecticut, USA <br /> created:  2016-11-24 <br /> followers:  141&rdquo;,&ldquo;city:  Valencia, Espa√±a <br /> created:  2016-11-13 <br /> followers:  151&rdquo;,&ldquo;city:  Nashville, TN <br /> created:  2016-09-28 <br /> followers:  182&rdquo;,&ldquo;city:  Austin, TX <br /> created:  2016-12-15 <br /> followers:  113&rdquo;,&ldquo;city:  Ames, IA <br /> created:  2016-11-30 <br /> followers:  130&rdquo;,&ldquo;city:  Washington, DC <br /> created:  2016-12-08 <br /> followers:  128&rdquo;,&ldquo;city:  Buenos Aires, Argentina <br /> created:  2017-01-05 <br /> followers:  217&rdquo;,&ldquo;city:  London, Ontario <br /> created:  2017-01-19 <br /> followers:  92&rdquo;,&ldquo;city:  Manchester, England <br /> created:  2016-10-08 <br /> followers:  137&rdquo;,&ldquo;city:  Dublin City, Ireland <br /> created:  2017-01-21 <br /> followers:  84&rdquo;,&ldquo;city:  Lima, Peru <br /> created:  2016-10-08 <br /> followers:  54&rdquo;,&ldquo;city:  Tbilisi <br /> created:  2016-11-29 <br /> followers:  100&rdquo;,&ldquo;city:  Adelaide, South Australia <br /> created:  2017-02-20 <br /> followers:  58&rdquo;,&ldquo;city:  Munich, Bavaria <br /> created:  2017-03-21 <br /> followers:  58&rdquo;,&ldquo;city:  Santa Rosa, Argentina <br /> created:  2017-04-06 <br /> followers:  33&rdquo;,&ldquo;city:  Madrid, Spain <br /> created:  2016-09-03 <br /> followers:  473&rdquo;,&ldquo;city:  Twin Cities <br /> created:  2015-04-04 <br /> followers:  86&rdquo;,&ldquo;city:  Budapest, Magyarorsz√°g <br /> created:  2017-01-23 <br /> followers:  73&rdquo;,&ldquo;city:  Izmir, Turkey <br /> created:  2016-10-19 <br /> followers:  88&rdquo;,&ldquo;city:  Cape Town, South Africa <br /> created:  2017-03-06 <br /> followers:  54&rdquo;,&ldquo;city:  Rio de Janeiro, Brazil <br /> created:  2017-01-15 <br /> followers:  32&rdquo;,&ldquo;city:  Montreal <br /> created:  2017-04-13 <br /> followers:  1&rdquo;,&ldquo;city:  Seattle <br /> created:  2017-05-06 <br /> followers:  0&rdquo;,&ldquo;city:  Taipei <br /> created:  2014-11-15 <br /> followers:  347&rdquo;,&ldquo;city:  Warsaw <br /> created:  2016-11-15 <br /> followers:  80&rdquo;],&ldquo;geo&rdquo;:&ldquo;geo&rdquo;,&ldquo;lat&rdquo;:[37.7749295,40.7127837,41.0082376,41.3850639,39.9611755,42.3600825,34.0522342,51.5073509,-37.8136276,48.856614,38.7222524,52.5200066,35.9940329,41.6032207,39.4699075,36.1626638,30.267153,42.0307812,38.9071923,-34.6036844,42.9849233,53.4807593,53.3498053,-12.0463731,41.7151377,-34.9284989,48.1351253,-36.620922,40.4167754,44.9374831,47.497912,38.423734,-33.9248685,-22.9068467,45.5016889,47.6062095,25.0329694,52.2296756],&ldquo;lon&rdquo;:[-122.4194155,-74.0059413,28.9783589,2.1734035,-82.9987942,-71.0588801,-118.2436849,-0.1277583,144.9630576,2.3522219,-9.1393366,13.404954,-78.898619,-73.087749,-0.3762881,-86.7816016,-97.7430608,-93.6319131,-77.0368707,-58.3815591,-81.2452768,-2.2426305,-6.2603097,-77.042754,44.827096,138.6007456,11.5819806,-64.2912369,-3.7037902,-93.2009998,19.040235,27.142826,18.4240553,-43.1728965,-73.567256,-122.3320708,121.5654177,21.0122287]}],&ldquo;base_url&rdquo;:&ldquo;<a href="https://plot.ly&quot;},&quot;evals&quot;:[&quot;config.modeBarButtonsToAdd.0.click&quot;],&quot;jsHooks&quot;:[]">https://plot.ly&quot;},&quot;evals&quot;:[&quot;config.modeBarButtonsToAdd.0.click&quot;],&quot;jsHooks&quot;:[]</a>}</script><!--/html_preserve--></p>

<p>This code produces a 16.2 KB HTML, so there I had a 99.5% reduction üéâ</p>

<p>If you had a different experience, please let me know! You can comment below or <a href="https://twitter.com/intent/tweet?user_id=114258616">mention me on Twitter</a>.</p>

<p>And, if you enjoyed this article, check out <a href="{% post_url 2017-04-24-how-to-plot-animated-maps-with-gganimate %}">the next one of the series here!</a> or <a href="https://github.com/d4tagirl/R-Ladies-growth-maps">the code in my GitHub repo</a>. Thank you for reading üòâ</p>
                </section>
            </article>

            
                <a class="twitter" href="https://twitter.com/intent/tweet?text=%2f1%2f01%2fhow-to-deal-with-ggplotly-huge-maps%2f - How%20to%20deal%20with%20ggplotly%20huge%20maps by @your_twitter_id"><span class="icon-twitter"> tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

            

            
                <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'your_disqus_short_name'; 

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

            

            

            <footer id="footer">
    
        <div id="social">

	
	
    <a class="symbol" href="https://www.github.com/nodejh">
        <i class="fa fa-github-square"></i>
    </a>
    
    <a class="symbol" href="https://www.twitter.com/nodejh">
        <i class="fa fa-twitter-square"></i>
    </a>
    


</div>

    
    <p class="small">
    
       ¬© Copyright 2019 <i class="fa fa-heart" aria-hidden="true"></i> site_author
    
    </p>
    <p class="small">
        Powered by <a href="http://www.gohugo.io/">Hugo</a> Theme By <a href="https://github.com/nodejh/hugo-theme-cactus-plus">nodejh</a>
    </p>
</footer>

        </section>

        <script src="/js/jquery-3.3.1.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'your_google_analytics_id', 'auto');
	
	ga('send', 'pageview');
}
</script>





    </body>
</html>
