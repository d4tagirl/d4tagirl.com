<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>maps on d4tagirl</title>
    <link>/tags/maps/</link>
    <description>Recent content in maps on d4tagirl</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Mon, 15 May 2017 08:11:29 +0000</lastBuildDate>
    
        <atom:link href="/tags/maps/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>How to plot animated maps with gganimate</title>
      <link>/2017/05/how-to-plot-animated-maps-with-gganimate/</link>
      <pubDate>Mon, 15 May 2017 08:11:29 +0000</pubDate>
      
      <guid>/2017/05/how-to-plot-animated-maps-with-gganimate/</guid>
      <description>

&lt;hr /&gt;

&lt;p&gt;This map was built using &lt;a href=&#34;https://github.com/thomasp85/gganimate/releases/tag/v0.1.1&#34;&gt;&lt;code&gt;gganimate&lt;/code&gt; v0.1.1&lt;/a&gt;. It breaks with the latest version.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;This is the third one of the 3-posts-series, where I go from fetching Twitter users and preparing the data to visualizing it (If I wanted to show everything I&amp;rsquo;ve done in a single post, it would be almost as long as my first one! And believe me: nobody wants that üòù ):&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;/2017/05/how-to-fetch-twitter-users-with-r/&#34;&gt;How to fetch Twitter users with R&lt;/a&gt;: the title is kind of self explanatory&amp;hellip;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/2017/05/how-to-deal-with-ggplotly-huge-maps/&#34;&gt;How to deal with ggplotly huge maps&lt;/a&gt;: where I go through the details of why I chose not to use &lt;code&gt;ggplotly&lt;/code&gt; and use &lt;code&gt;plot_geo&lt;/code&gt; instead to generate the HTML.&lt;/li&gt;
&lt;li&gt;How to plot animated maps with gganimate: this one. Again, pretty obvious subject.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Finally &lt;a href=&#34;/2017/05/visualizing-r-ladies-growth/&#34;&gt;I present my favourite visualization here&lt;/a&gt;.
&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&#34;the-data&#34;&gt;The data&lt;/h2&gt;

&lt;p&gt;Let&amp;rsquo;s take a look at the R-Ladies&amp;rsquo; chapters&amp;rsquo; Twitter accounts dataframe, &lt;code&gt;rladies&lt;/code&gt;, I produced in the first post of this series:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(readr)
library(dplyr)

url_csv &amp;lt;- &#39;https://raw.githubusercontent.com/d4tagirl/R-Ladies-growth-maps/master/rladies.csv&#39;
rladies &amp;lt;- read_csv(url(url_csv)) %&amp;gt;% 
  select(-1)

library(DT)

datatable(rladies, rownames = FALSE,
          options = list(pageLength = 5))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;!--html_preserve--&gt;&lt;div id=&#34;htmlwidget-ff5b3f732e9876b1063a&#34; style=&#34;width:100%;height:auto;&#34; class=&#34;datatables html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-ff5b3f732e9876b1063a&#34;&gt;{&amp;ldquo;x&amp;rdquo;:{&amp;ldquo;filter&amp;rdquo;:&amp;ldquo;none&amp;rdquo;,&amp;ldquo;data&amp;rdquo;:[[&amp;ldquo;RLadiesSF&amp;rdquo;,&amp;ldquo;RLadiesNYC&amp;rdquo;,&amp;ldquo;RLadiesIstanbul&amp;rdquo;,&amp;ldquo;RLadiesBCN&amp;rdquo;,&amp;ldquo;RLadiesColumbus&amp;rdquo;,&amp;ldquo;RLadiesBoston&amp;rdquo;,&amp;ldquo;RLadiesLA&amp;rdquo;,&amp;ldquo;RLadiesLondon&amp;rdquo;,&amp;ldquo;RLadiesAU&amp;rdquo;,&amp;ldquo;RLadiesParis&amp;rdquo;,&amp;ldquo;RLadiesLx&amp;rdquo;,&amp;ldquo;RLadiesBerlin&amp;rdquo;,&amp;ldquo;RLadiesRTP&amp;rdquo;,&amp;ldquo;RLadiesCT&amp;rdquo;,&amp;ldquo;RLadiesValencia&amp;rdquo;,&amp;ldquo;RLadiesNash&amp;rdquo;,&amp;ldquo;RLadiesAustin&amp;rdquo;,&amp;ldquo;RLadiesAmes&amp;rdquo;,&amp;ldquo;RLadiesDC&amp;rdquo;,&amp;ldquo;RLadiesBA&amp;rdquo;,&amp;ldquo;RLadiesLdnOnt&amp;rdquo;,&amp;ldquo;RLadiesManchest&amp;rdquo;,&amp;ldquo;RLadiesDublin&amp;rdquo;,&amp;ldquo;RLadiesLima&amp;rdquo;,&amp;ldquo;RLadiesTbilisi&amp;rdquo;,&amp;ldquo;RLadiesAdelaide&amp;rdquo;,&amp;ldquo;RLadiesMunich&amp;rdquo;,&amp;ldquo;RLadiesSR&amp;rdquo;,&amp;ldquo;RLadiesMAD&amp;rdquo;,&amp;ldquo;RLadiesTC&amp;rdquo;,&amp;ldquo;RLadiesBudapest&amp;rdquo;,&amp;ldquo;RLadiesIzmir&amp;rdquo;,&amp;ldquo;RLadiesCapeTown&amp;rdquo;,&amp;ldquo;RLadiesRio&amp;rdquo;,&amp;ldquo;RLadiesMTL&amp;rdquo;,&amp;ldquo;RLadiesSeattle&amp;rdquo;,&amp;ldquo;RLadiesTaipei&amp;rdquo;,&amp;ldquo;RLadiesWarsaw&amp;rdquo;],[&amp;ldquo;San Francisco&amp;rdquo;,&amp;ldquo;New York&amp;rdquo;,&amp;ldquo;ƒ∞stanbul, T√ºrkiye&amp;rdquo;,&amp;ldquo;Barcelona, Spain&amp;rdquo;,&amp;ldquo;Columbus, OH&amp;rdquo;,&amp;ldquo;Boston, MA&amp;rdquo;,&amp;ldquo;Los Angeles, CA&amp;rdquo;,&amp;ldquo;London, England&amp;rdquo;,&amp;ldquo;Melbourne, Victoria&amp;rdquo;,&amp;ldquo;Paris, France&amp;rdquo;,&amp;ldquo;Lisbon&amp;rdquo;,&amp;ldquo;Berlin, Deutschland&amp;rdquo;,&amp;ldquo;Durham, NC&amp;rdquo;,&amp;ldquo;Connecticut, USA&amp;rdquo;,&amp;ldquo;Valencia, Espa√±a&amp;rdquo;,&amp;ldquo;Nashville, TN&amp;rdquo;,&amp;ldquo;Austin, TX&amp;rdquo;,&amp;ldquo;Ames, IA&amp;rdquo;,&amp;ldquo;Washington, DC&amp;rdquo;,&amp;ldquo;Buenos Aires, Argentina&amp;rdquo;,&amp;ldquo;London, Ontario&amp;rdquo;,&amp;ldquo;Manchester, England&amp;rdquo;,&amp;ldquo;Dublin City, Ireland&amp;rdquo;,&amp;ldquo;Lima, Peru&amp;rdquo;,&amp;ldquo;Tbilisi&amp;rdquo;,&amp;ldquo;Adelaide, South Australia&amp;rdquo;,&amp;ldquo;Munich, Bavaria&amp;rdquo;,&amp;ldquo;Santa Rosa, Argentina&amp;rdquo;,&amp;ldquo;Madrid, Spain&amp;rdquo;,&amp;ldquo;Twin Cities&amp;rdquo;,&amp;ldquo;Budapest, Magyarorsz√°g&amp;rdquo;,&amp;ldquo;Izmir, Turkey&amp;rdquo;,&amp;ldquo;Cape Town, South Africa&amp;rdquo;,&amp;ldquo;Rio de Janeiro, Brazil&amp;rdquo;,&amp;ldquo;Montreal&amp;rdquo;,&amp;ldquo;Seattle&amp;rdquo;,&amp;ldquo;Taipei&amp;rdquo;,&amp;ldquo;Warsaw&amp;rdquo;],[&amp;ldquo;2012-10-15&amp;rdquo;,&amp;ldquo;2016-09-01&amp;rdquo;,&amp;ldquo;2016-09-06&amp;rdquo;,&amp;ldquo;2016-10-11&amp;rdquo;,&amp;ldquo;2016-10-04&amp;rdquo;,&amp;ldquo;2016-09-06&amp;rdquo;,&amp;ldquo;2016-08-29&amp;rdquo;,&amp;ldquo;2016-04-20&amp;rdquo;,&amp;ldquo;2016-09-02&amp;rdquo;,&amp;ldquo;2016-09-19&amp;rdquo;,&amp;ldquo;2016-10-26&amp;rdquo;,&amp;ldquo;2016-10-03&amp;rdquo;,&amp;ldquo;2016-06-28&amp;rdquo;,&amp;ldquo;2016-11-24&amp;rdquo;,&amp;ldquo;2016-11-13&amp;rdquo;,&amp;ldquo;2016-09-28&amp;rdquo;,&amp;ldquo;2016-12-15&amp;rdquo;,&amp;ldquo;2016-11-30&amp;rdquo;,&amp;ldquo;2016-12-08&amp;rdquo;,&amp;ldquo;2017-01-05&amp;rdquo;,&amp;ldquo;2017-01-19&amp;rdquo;,&amp;ldquo;2016-10-08&amp;rdquo;,&amp;ldquo;2017-01-21&amp;rdquo;,&amp;ldquo;2016-10-08&amp;rdquo;,&amp;ldquo;2016-11-29&amp;rdquo;,&amp;ldquo;2017-02-20&amp;rdquo;,&amp;ldquo;2017-03-21&amp;rdquo;,&amp;ldquo;2017-04-06&amp;rdquo;,&amp;ldquo;2016-09-03&amp;rdquo;,&amp;ldquo;2015-04-04&amp;rdquo;,&amp;ldquo;2017-01-23&amp;rdquo;,&amp;ldquo;2016-10-19&amp;rdquo;,&amp;ldquo;2017-03-06&amp;rdquo;,&amp;ldquo;2017-01-15&amp;rdquo;,&amp;ldquo;2017-04-13&amp;rdquo;,&amp;ldquo;2017-05-06&amp;rdquo;,&amp;ldquo;2014-11-15&amp;rdquo;,&amp;ldquo;2016-11-15&amp;rdquo;],[916,309,436,377,179,259,320,1154,415,253,199,202,220,141,151,182,113,130,128,217,92,137,84,54,100,58,58,33,473,86,73,88,54,32,1,0,347,80],[1672.91666666667,255.875,250.875,215.875,222.875,250.875,258.875,389.875,254.875,237.875,200.875,223.875,320.875,171.875,182.875,228.875,150.875,165.875,157.875,129.875,115.875,218.875,113.875,218.875,166.875,83.875,54.875,38.875,253.875,771.875,111.875,207.875,69.875,119.875,31.875,8.875,911.916666666667,180.875],[-122.4194155,-74.0059413,28.9783589,2.1734035,-82.9987942,-71.0588801,-118.2436849,-0.1277583,144.9630576,2.3522219,-9.1393366,13.404954,-78.898619,-73.087749,-0.3762881,-86.7816016,-97.7430608,-93.6319131,-77.0368707,-58.3815591,-81.2452768,-2.2426305,-6.2603097,-77.042754,44.827096,138.6007456,11.5819806,-64.2912369,-3.7037902,-93.2009998,19.040235,27.142826,18.4240553,-43.1728965,-73.567256,-122.3320708,121.5654177,21.0122287],[37.7749295,40.7127837,41.0082376,41.3850639,39.9611755,42.3600825,34.0522342,51.5073509,-37.8136276,48.856614,38.7222524,52.5200066,35.9940329,41.6032207,39.4699075,36.1626638,30.267153,42.0307812,38.9071923,-34.6036844,42.9849233,53.4807593,53.3498053,-12.0463731,41.7151377,-34.9284989,48.1351253,-36.620922,40.4167754,44.9374831,47.497912,38.423734,-33.9248685,-22.9068467,45.5016889,47.6062095,25.0329694,52.2296756]],&amp;ldquo;container&amp;rdquo;:&amp;rdquo;&lt;table class=\&#34;display\&#34;&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;screen_name&amp;lt;\/th&amp;gt;\n      &lt;th&gt;location&amp;lt;\/th&amp;gt;\n      &lt;th&gt;created_at&amp;lt;\/th&amp;gt;\n      &lt;th&gt;followers&amp;lt;\/th&amp;gt;\n      &lt;th&gt;age_days&amp;lt;\/th&amp;gt;\n      &lt;th&gt;lon&amp;lt;\/th&amp;gt;\n      &lt;th&gt;lat&amp;lt;\/th&amp;gt;\n    &amp;lt;\/tr&amp;gt;\n  &amp;lt;\/thead&amp;gt;\n&amp;lt;\/table&amp;gt;&amp;ldquo;,&amp;ldquo;options&amp;rdquo;:{&amp;ldquo;pageLength&amp;rdquo;:5,&amp;ldquo;columnDefs&amp;rdquo;:[{&amp;ldquo;className&amp;rdquo;:&amp;ldquo;dt-right&amp;rdquo;,&amp;ldquo;targets&amp;rdquo;:[3,4,5,6]}],&amp;ldquo;order&amp;rdquo;:[],&amp;ldquo;autoWidth&amp;rdquo;:false,&amp;ldquo;orderClasses&amp;rdquo;:false,&amp;ldquo;lengthMenu&amp;rdquo;:[5,10,25,50,100]},&amp;ldquo;selection&amp;rdquo;:{&amp;ldquo;mode&amp;rdquo;:&amp;ldquo;multiple&amp;rdquo;,&amp;ldquo;selected&amp;rdquo;:null,&amp;ldquo;target&amp;rdquo;:&amp;ldquo;row&amp;rdquo;}},&amp;ldquo;evals&amp;rdquo;:[],&amp;ldquo;jsHooks&amp;rdquo;:[]}&lt;/script&gt;&lt;!--/html_preserve--&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&#34;plotting-the-map-using-ggplot2&#34;&gt;Plotting the map using ggplot2&lt;/h2&gt;

&lt;p&gt;The goal is to produce a map where each chapter is plotted according to its location, with the point&amp;rsquo;s size indicating the amount of Twitter followers.&lt;/p&gt;

&lt;p&gt;I use the &lt;code&gt;maps&lt;/code&gt; package to get the world map, using the &lt;code&gt;ggplot2::ggplot&lt;/code&gt; and &lt;code&gt;ggthemes::theme_map&lt;/code&gt; functions for plotting it nicely. Then I plot the chapters choosing the purple color, obviously!&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(ggplot2)
library(maps)
library(ggthemes)

world &amp;lt;- ggplot() +
  borders(&amp;quot;world&amp;quot;, colour = &amp;quot;gray85&amp;quot;, fill = &amp;quot;gray80&amp;quot;) +
  theme_map() 

map &amp;lt;- world +
  geom_point(aes(x = lon, y = lat, size = followers),
             data = rladies, 
             colour = &#39;purple&#39;, alpha = .5) +
  scale_size_continuous(range = c(1, 8), 
                        breaks = c(250, 500, 750, 1000)) +
  labs(size = &#39;Followers&#39;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;/post/how-to-plot-animated-maps-with-gganimate/2017-04-24-how-to-plot-animated-maps-with-gganimate/static_chapters_map-1.png&#34; style=&#34;margin: auto;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;range&lt;/code&gt; parameter is what controls the scale of the points&amp;rsquo; size.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&#34;animating-the-map-using-gganimate&#34;&gt;Animating the map using gganimate&lt;/h2&gt;

&lt;p&gt;Now let&amp;rsquo;s animate the map! The core thing here is that I want every chapter appearing following the creation timeline, to somehow tell a story with the map. Lets start by animating &lt;code&gt;map&lt;/code&gt;: the &lt;code&gt;ggplot&lt;/code&gt; object I just created. I have to make a few changes for &lt;code&gt;gganimate&lt;/code&gt; to work:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;gganimate&lt;/code&gt; requires a &lt;code&gt;frame&lt;/code&gt; aesthetic: I&amp;rsquo;ll use the &lt;code&gt;created_at&lt;/code&gt; variable. You set this as a new aesthetic in &lt;code&gt;ggplot&lt;/code&gt; which is ignored by it (as shown in the warning messages), but &lt;code&gt;gganimate&lt;/code&gt; recognizes and uses it;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;I also add the &lt;code&gt;cumulative = TRUE&lt;/code&gt;, an additional aesthetic  (same comment about &lt;code&gt;ggplot&lt;/code&gt; ignoring it), so once the chapter appears on the map, it keeps showing in all the following frames.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Following &lt;a href=&#34;https://www.linkedin.com/in/bruno-chiesa-gispert-b1a6b942/&#34;&gt;my good friend Bruno&lt;/a&gt;&amp;rsquo;s suggestion, I add an empty frame at the beginning so that the first frame you see is just the empty map. I generate a dataframe with the same structure than the original one, with some random data, except for the &lt;code&gt;created_at&lt;/code&gt; field that should be filled with a date prior to the first chapter creation for it to appear at the beginning.&lt;/p&gt;

&lt;p&gt;And I add some empty frames at the end as well, to be able to see the final composition of chapters for a bit longer.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(tibble)
library(lubridate)

ghost_points_ini &amp;lt;- tibble(
  created_at = as.Date(&#39;2011-09-01&#39;),
  followers = 0, lon = 0, lat = 0)

ghost_points_fin &amp;lt;- tibble(
  created_at = seq(as.Date(&#39;2017-05-16&#39;),
                   as.Date(&#39;2017-05-30&#39;),
                   by = &#39;days&#39;),
  followers = 0, lon = 0, lat = 0)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then I add 2 extra layers to the &lt;code&gt;ggplot&lt;/code&gt;: the second and third &lt;code&gt;geom_point&lt;/code&gt;s, with the &lt;code&gt;alpha&lt;/code&gt; parameter set to &lt;code&gt;0&lt;/code&gt; so the points will not show in the plot.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;map &amp;lt;- world +
  geom_point(aes(x = lon, y = lat, size = followers, 
                 frame = created_at,
                 cumulative = TRUE),
             data = rladies, colour = &#39;purple&#39;, alpha = .5) +
  geom_point(aes(x = lon, y = lat, size = followers, # this is the init transparent frame
                 frame = created_at,
                 cumulative = TRUE),
             data = ghost_points_ini, alpha = 0) +
  geom_point(aes(x = lon, y = lat, size = followers, # this is the final transparent frames
                 frame = created_at,
                 cumulative = TRUE),
             data = ghost_points_fin, alpha = 0) +
  scale_size_continuous(range = c(1, 8), breaks = c(250, 500, 750, 1000)) +
  labs(size = &#39;Followers&#39;) 

library(gganimate)
ani.options(interval = 0.2)
gganimate(map)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;/post/how-to-plot-animated-maps-with-gganimate/2017-04-24-how-to-plot-animated-maps-with-gganimate/ani_map.gif&#34; alt=&#34;ani_map&#34; /&gt;&lt;/p&gt;

&lt;p&gt;This animation is so cool! It shows how R-Ladies is spreading all over the globe, giving also some idea of how it is growing: where in the world the chapters concentrates and how it accelerated its growing significantly in the last year or so!
&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&#34;customizing-the-animation&#34;&gt;Customizing the animation&lt;/h2&gt;

&lt;p&gt;Now it&amp;rsquo;s when I start to get a little obsessed about some details&amp;hellip; You can always improve things, right? üòâ
&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&#34;adding-additional-frames&#34;&gt;Adding additional frames&lt;/h3&gt;

&lt;p&gt;This idea actually came from my husband, who suggested that each point could start small when the chapter is founded and reach its full size today. How cool would that be?!&lt;/p&gt;

&lt;p&gt;I only have each chapter once in the &lt;code&gt;rladies&lt;/code&gt; dataframe, with the creation date and the amount of followers. To create new frames for the &lt;code&gt;gganimate&lt;/code&gt;, I have to replicate each chapter with an intermediate number of followers (I assume linear growth) for each intermediate date. I do that by creating a dataframe of dates from the first R-Ladies&amp;rsquo; chapter was created until today (to make this analysis reproducible I assume today is 2017-05-15), and keep only the dates 1, 10 and 20 of each month (I could keep all dates but It would not improve the animation&amp;rsquo;s quality much and it would generate a heavier animation).&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;dates &amp;lt;- as_tibble(seq(floor_date(as.Date(min(rladies$created_at)), 
                                  unit = &amp;quot;month&amp;quot;),
                       as.Date(&#39;2017-05-15&#39;),
                       by = &#39;days&#39;)) %&amp;gt;%
  filter(day(value) %in% c(1, 10, 20))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then I generate a new dataframe with every chapter appearing once for every intermediate date, from its creation date until today. I assume the number of followers increasing linearly. (If you are familiar with &lt;code&gt;tidiverse&lt;/code&gt; maybe you &lt;a href=&#34;#skipping&#34;&gt;prefer to skip the next part&lt;/a&gt; where I explain how I join these tables).&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(tidyr)

rladies_frames &amp;lt;- rladies %&amp;gt;%
  select(screen_name) %&amp;gt;%
  expand(screen_name, date = dates$value) %&amp;gt;%
  right_join(rladies, by = &#39;screen_name&#39;) %&amp;gt;%
  filter(date &amp;gt; created_at) %&amp;gt;%
  mutate(age_total = as.numeric(age_days, units = &#39;days&#39;),
         age_at_date = as.numeric(difftime(date, created_at, unit = &#39;days&#39;), 
                                  units = &#39;days&#39;),
         est_followers = ((followers - 1) / age_total) * age_at_date)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Step-by-step what I do is take the original &lt;code&gt;rladies&lt;/code&gt; dataframe and select the &lt;code&gt;screen_name&lt;/code&gt; column. With the &lt;code&gt;tidyr::expand&lt;/code&gt; I create one row for every &lt;code&gt;screen_name&lt;/code&gt;-&lt;code&gt;date&lt;/code&gt; combination (Cartesian product). The &lt;code&gt;right_join&lt;/code&gt; completes the rest of the information for every chapter, and then I keep only the dates for every chapter that are greater than its creation date (I don&amp;rsquo;t want to have frames for a chapter previous to its foundation!). At last I add some variables useful to estimate the amount of followers (&lt;code&gt;est_followers&lt;/code&gt;), assuming the amount of followers increases linearly.&lt;/p&gt;

&lt;p&gt;&lt;a id=&#34;skipping&#34;&gt; &lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;ghost_points_ini &amp;lt;-  ghost_points_ini %&amp;gt;%
  mutate(date = created_at,
         est_followers = 0)

ghost_points_fin &amp;lt;-  ghost_points_fin %&amp;gt;%
  expand(date = created_at, rladies) %&amp;gt;%
  select(date, est_followers = followers, lon, lat)

map_frames &amp;lt;- world +
  geom_point(aes(x = lon, y = lat, size = est_followers, 
                 frame = date),
             data = rladies_frames, colour = &#39;purple&#39;, alpha = .5) +
  geom_point(aes(x = lon, y = lat, size = est_followers,
                 frame = date),
             data = ghost_points_ini, alpha = 0) +
  geom_point(aes(x = lon, y = lat, size = est_followers,
                 frame = date),
             data = ghost_points_fin, colour = &#39;purple&#39;, alpha = .5) +
  scale_size_continuous(range = c(1, 8), breaks = c(250, 500, 750, 1000)) +
  labs(size = &#39;Followers&#39;)

ani.options(interval = .05)
gganimate(map_frames)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;/post/how-to-plot-animated-maps-with-gganimate/2017-04-24-how-to-plot-animated-maps-with-gganimate/ani_map_frames.gif&#34; alt=&#34;ani_map_frames&#34; /&gt;&lt;/p&gt;

&lt;p&gt;This is a very accurate map in terms of the timeline: it shows how long it took for every chapter to be founded and how R-Ladies proliferated in the past year or so.&lt;/p&gt;

&lt;p&gt;But&amp;hellip; (I told you I got kind of obsessed ü§∑üèª
‚ôÄÔ∏è ) it takes too long from the creation of the first chapters until it started to get traction and the last part of the animation is really fast in comparison. So let&amp;rsquo;s take care of that üòâ
&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&#34;removing-some-frames-from-the-beginning&#34;&gt;Removing some frames from the beginning&lt;/h3&gt;

&lt;p&gt;The foundation of the London chapter was kind of a turning point: after that, R-Ladies started to spread much faster. So I decided to keep all frames after that date, but remove several frames from before, keeping only the first day of the month, every 6 months.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;rladies_less_frames &amp;lt;- rladies_frames %&amp;gt;%
  filter((day(date) == 1 &amp;amp; month(date) %% 6 == 0) |
           date &amp;gt;= rladies$created_at[rladies$screen_name == &#39;RLadiesLondon&#39;])

map_less_frames &amp;lt;- world +
  geom_point(aes(x = lon, y = lat, size = est_followers, 
                 frame = date),
             data = rladies_less_frames, colour = &#39;purple&#39;, alpha = .5) +
  geom_point(aes(x = lon, y = lat, size = est_followers, 
                 frame = date),
             data = ghost_points_ini, alpha = 0) +
  geom_point(aes(x = lon, y = lat, size = est_followers, 
                 frame = date),
             data = ghost_points_fin, colour = &#39;purple&#39;, alpha = .5) +
  scale_size_continuous(range = c(1, 8), breaks = c(250, 500, 750, 1000)) +
  labs(size = &#39;Followers&#39;)

ani.options(interval = .15)
gganimate(map_less_frames)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;/post/how-to-plot-animated-maps-with-gganimate/2017-04-24-how-to-plot-animated-maps-with-gganimate/ani_map_less_frames.gif&#34; alt=&#34;ani_map_less_frames&#34; /&gt;&lt;/p&gt;

&lt;p&gt;This reduces a lot the amount of frames, at the cost of making the story less accurate in terms of time scale. But it is a nicer animation! My favorite actually üòä
&lt;br /&gt;&lt;/p&gt;

&lt;h2 id=&#34;creating-the-gif&#34;&gt;Creating the .gif&lt;/h2&gt;

&lt;p&gt;The only thing left is to save the animation to a file, in this case I choose a &lt;code&gt;.gif&lt;/code&gt;, but you can also choose to save it as .mp4, .swf or .html (each of them requiring specific drivers, &lt;a href=&#34;https://github.com/thomasp85/gganimate/releases/tag/v0.1.1&#34;&gt;check the documentation here&lt;/a&gt;)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;gganimate(map_less_frames, interval = .2, filename = &#39;rladies.gif&#39;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I wanted a .gif file to share it on Twitter, Slack and other social media, so I could post something like this:&lt;/p&gt;

&lt;p&gt;&lt;blockquote class=&#34;twitter-tweet tw-align-center&#34; data-lang=&#34;en&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;New &lt;a href=&#34;https://twitter.com/hashtag/rstats?src=hash&#34;&gt;#rstats&lt;/a&gt; post! Visualizing &lt;a href=&#34;https://twitter.com/hashtag/RLadies?src=hash&#34;&gt;#RLadies&lt;/a&gt; growth üíú Step-by-step from Twitter users to &lt;a href=&#34;https://twitter.com/hashtag/plotly?src=hash&#34;&gt;#plotly&lt;/a&gt; and &lt;a href=&#34;https://twitter.com/hashtag/gganimate?src=hash&#34;&gt;#gganimate&lt;/a&gt; &lt;a href=&#34;https://t.co/Jgi82Xb4X0&#34;&gt;https://t.co/Jgi82Xb4X0&lt;/a&gt; &lt;a href=&#34;https://t.co/5qkxQwJKQF&#34;&gt;pic.twitter.com/5qkxQwJKQF&lt;/a&gt;&lt;/p&gt;&amp;mdash; Daniela V√°zquez (@d4tagirl) &lt;a href=&#34;https://twitter.com/d4tagirl/status/864207469911957504&#34;&gt;May 15, 2017&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;//platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
It was a pretty popular Tweet, so you should try!&lt;/p&gt;

&lt;p&gt;That&amp;rsquo;s it! You can check out &lt;a href=&#34;https://github.com/d4tagirl/R-Ladies-growth-maps&#34;&gt;the code in my GitHub repo here&lt;/a&gt;. Please leave your comments if you have any, or &lt;a href=&#34;https://twitter.com/intent/tweet?user_id=114258616&#34;&gt;mention me on Twitter&lt;/a&gt;. Thanks for reading üòâ&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>How to deal with ggplotly huge maps</title>
      <link>/2017/05/how-to-deal-with-ggplotly-huge-maps/</link>
      <pubDate>Mon, 15 May 2017 07:11:29 +0000</pubDate>
      
      <guid>/2017/05/how-to-deal-with-ggplotly-huge-maps/</guid>
      <description>

&lt;p&gt;This is the second one of the 3-posts-series, where I go from fetching Twitter users and preparing the data to visualizing it (If I wanted to show everything I&amp;rsquo;ve done in a single post, it would be almost as long as my first one! And believe me: nobody wants that üòù ):&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;/2017/05/how-to-fetch-twitter-users-with-r/&#34;&gt;How to fetch Twitter users with R&lt;/a&gt;: the title is kind of self explanatory&amp;hellip;&lt;/li&gt;
&lt;li&gt;How to deal with ggplotly huge maps: this one, where I go through the details of why I chose not to use &lt;code&gt;ggplotly&lt;/code&gt; and use &lt;code&gt;plot_geo&lt;/code&gt; instead to generate the HTML.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;/2017/05/how-to-plot-animated-maps-with-gganimate/&#34;&gt;How to plot animated maps with gganimate&lt;/a&gt;: again, pretty obvious subject.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Finally &lt;a href=&#34;/2017/05/visualizing-r-ladies-growth/&#34;&gt;I present my favourite visualization here&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;motivation&#34;&gt;Motivation&lt;/h2&gt;

&lt;p&gt;For this series I&amp;rsquo;ve been experimenting with interactive maps and animated ones these past few days and I finally was able to produce some fancy outputs using the &lt;code&gt;plotly&lt;/code&gt; package and the &lt;code&gt;gganimate&lt;/code&gt; one. You can see the whole process &lt;a href=&#34;https://github.com/d4tagirl/R-Ladies-growth-maps&#34;&gt;in my GitHub repo&lt;/a&gt;. Everything was working perfectly on RStudio, until I wanted to share my results on my blog, and &lt;em&gt;things got complicated&lt;/em&gt;. Originally I produced some interactive maps using the &lt;code&gt;plotly::ggplotly&lt;/code&gt; function and it generated a 3.3 MB HTML&amp;hellip; and &lt;em&gt;that&amp;rsquo;s an issue&lt;/em&gt; when you want to include it on a website üò≥ . So I tried a different approach: using the &lt;code&gt;plotly::plot_geo&lt;/code&gt; function I was able to produce a very similar plot, generating a way smaller HTML.&lt;/p&gt;

&lt;h2 id=&#34;the-data&#34;&gt;The data&lt;/h2&gt;

&lt;p&gt;I&amp;rsquo;m using the &lt;a href=&#34;/2017/05/how-to-fetch-twitter-users-with-r/&#34;&gt;data produced in this previous post&lt;/a&gt;. Let&amp;rsquo;s take a look at it to see what we are dealing with.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(readr)
library(dplyr)

url_csv &amp;lt;- &#39;https://raw.githubusercontent.com/d4tagirl/R-Ladies-growth-maps/master/rladies.csv&#39;
rladies &amp;lt;- read_csv(url(url_csv)) %&amp;gt;% 
  select(-1)

library(DT)
datatable(rladies, rownames = FALSE,
          options = list(pageLength = 5))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;!--html_preserve--&gt;&lt;div id=&#34;htmlwidget-84b08d40edc14555d2ba&#34; style=&#34;width:100%;height:auto;&#34; class=&#34;datatables html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-84b08d40edc14555d2ba&#34;&gt;{&amp;ldquo;x&amp;rdquo;:{&amp;ldquo;filter&amp;rdquo;:&amp;ldquo;none&amp;rdquo;,&amp;ldquo;data&amp;rdquo;:[[&amp;ldquo;RLadiesSF&amp;rdquo;,&amp;ldquo;RLadiesNYC&amp;rdquo;,&amp;ldquo;RLadiesIstanbul&amp;rdquo;,&amp;ldquo;RLadiesBCN&amp;rdquo;,&amp;ldquo;RLadiesColumbus&amp;rdquo;,&amp;ldquo;RLadiesBoston&amp;rdquo;,&amp;ldquo;RLadiesLA&amp;rdquo;,&amp;ldquo;RLadiesLondon&amp;rdquo;,&amp;ldquo;RLadiesAU&amp;rdquo;,&amp;ldquo;RLadiesParis&amp;rdquo;,&amp;ldquo;RLadiesLx&amp;rdquo;,&amp;ldquo;RLadiesBerlin&amp;rdquo;,&amp;ldquo;RLadiesRTP&amp;rdquo;,&amp;ldquo;RLadiesCT&amp;rdquo;,&amp;ldquo;RLadiesValencia&amp;rdquo;,&amp;ldquo;RLadiesNash&amp;rdquo;,&amp;ldquo;RLadiesAustin&amp;rdquo;,&amp;ldquo;RLadiesAmes&amp;rdquo;,&amp;ldquo;RLadiesDC&amp;rdquo;,&amp;ldquo;RLadiesBA&amp;rdquo;,&amp;ldquo;RLadiesLdnOnt&amp;rdquo;,&amp;ldquo;RLadiesManchest&amp;rdquo;,&amp;ldquo;RLadiesDublin&amp;rdquo;,&amp;ldquo;RLadiesLima&amp;rdquo;,&amp;ldquo;RLadiesTbilisi&amp;rdquo;,&amp;ldquo;RLadiesAdelaide&amp;rdquo;,&amp;ldquo;RLadiesMunich&amp;rdquo;,&amp;ldquo;RLadiesSR&amp;rdquo;,&amp;ldquo;RLadiesMAD&amp;rdquo;,&amp;ldquo;RLadiesTC&amp;rdquo;,&amp;ldquo;RLadiesBudapest&amp;rdquo;,&amp;ldquo;RLadiesIzmir&amp;rdquo;,&amp;ldquo;RLadiesCapeTown&amp;rdquo;,&amp;ldquo;RLadiesRio&amp;rdquo;,&amp;ldquo;RLadiesMTL&amp;rdquo;,&amp;ldquo;RLadiesSeattle&amp;rdquo;,&amp;ldquo;RLadiesTaipei&amp;rdquo;,&amp;ldquo;RLadiesWarsaw&amp;rdquo;],[&amp;ldquo;San Francisco&amp;rdquo;,&amp;ldquo;New York&amp;rdquo;,&amp;ldquo;ƒ∞stanbul, T√ºrkiye&amp;rdquo;,&amp;ldquo;Barcelona, Spain&amp;rdquo;,&amp;ldquo;Columbus, OH&amp;rdquo;,&amp;ldquo;Boston, MA&amp;rdquo;,&amp;ldquo;Los Angeles, CA&amp;rdquo;,&amp;ldquo;London, England&amp;rdquo;,&amp;ldquo;Melbourne, Victoria&amp;rdquo;,&amp;ldquo;Paris, France&amp;rdquo;,&amp;ldquo;Lisbon&amp;rdquo;,&amp;ldquo;Berlin, Deutschland&amp;rdquo;,&amp;ldquo;Durham, NC&amp;rdquo;,&amp;ldquo;Connecticut, USA&amp;rdquo;,&amp;ldquo;Valencia, Espa√±a&amp;rdquo;,&amp;ldquo;Nashville, TN&amp;rdquo;,&amp;ldquo;Austin, TX&amp;rdquo;,&amp;ldquo;Ames, IA&amp;rdquo;,&amp;ldquo;Washington, DC&amp;rdquo;,&amp;ldquo;Buenos Aires, Argentina&amp;rdquo;,&amp;ldquo;London, Ontario&amp;rdquo;,&amp;ldquo;Manchester, England&amp;rdquo;,&amp;ldquo;Dublin City, Ireland&amp;rdquo;,&amp;ldquo;Lima, Peru&amp;rdquo;,&amp;ldquo;Tbilisi&amp;rdquo;,&amp;ldquo;Adelaide, South Australia&amp;rdquo;,&amp;ldquo;Munich, Bavaria&amp;rdquo;,&amp;ldquo;Santa Rosa, Argentina&amp;rdquo;,&amp;ldquo;Madrid, Spain&amp;rdquo;,&amp;ldquo;Twin Cities&amp;rdquo;,&amp;ldquo;Budapest, Magyarorsz√°g&amp;rdquo;,&amp;ldquo;Izmir, Turkey&amp;rdquo;,&amp;ldquo;Cape Town, South Africa&amp;rdquo;,&amp;ldquo;Rio de Janeiro, Brazil&amp;rdquo;,&amp;ldquo;Montreal&amp;rdquo;,&amp;ldquo;Seattle&amp;rdquo;,&amp;ldquo;Taipei&amp;rdquo;,&amp;ldquo;Warsaw&amp;rdquo;],[&amp;ldquo;2012-10-15&amp;rdquo;,&amp;ldquo;2016-09-01&amp;rdquo;,&amp;ldquo;2016-09-06&amp;rdquo;,&amp;ldquo;2016-10-11&amp;rdquo;,&amp;ldquo;2016-10-04&amp;rdquo;,&amp;ldquo;2016-09-06&amp;rdquo;,&amp;ldquo;2016-08-29&amp;rdquo;,&amp;ldquo;2016-04-20&amp;rdquo;,&amp;ldquo;2016-09-02&amp;rdquo;,&amp;ldquo;2016-09-19&amp;rdquo;,&amp;ldquo;2016-10-26&amp;rdquo;,&amp;ldquo;2016-10-03&amp;rdquo;,&amp;ldquo;2016-06-28&amp;rdquo;,&amp;ldquo;2016-11-24&amp;rdquo;,&amp;ldquo;2016-11-13&amp;rdquo;,&amp;ldquo;2016-09-28&amp;rdquo;,&amp;ldquo;2016-12-15&amp;rdquo;,&amp;ldquo;2016-11-30&amp;rdquo;,&amp;ldquo;2016-12-08&amp;rdquo;,&amp;ldquo;2017-01-05&amp;rdquo;,&amp;ldquo;2017-01-19&amp;rdquo;,&amp;ldquo;2016-10-08&amp;rdquo;,&amp;ldquo;2017-01-21&amp;rdquo;,&amp;ldquo;2016-10-08&amp;rdquo;,&amp;ldquo;2016-11-29&amp;rdquo;,&amp;ldquo;2017-02-20&amp;rdquo;,&amp;ldquo;2017-03-21&amp;rdquo;,&amp;ldquo;2017-04-06&amp;rdquo;,&amp;ldquo;2016-09-03&amp;rdquo;,&amp;ldquo;2015-04-04&amp;rdquo;,&amp;ldquo;2017-01-23&amp;rdquo;,&amp;ldquo;2016-10-19&amp;rdquo;,&amp;ldquo;2017-03-06&amp;rdquo;,&amp;ldquo;2017-01-15&amp;rdquo;,&amp;ldquo;2017-04-13&amp;rdquo;,&amp;ldquo;2017-05-06&amp;rdquo;,&amp;ldquo;2014-11-15&amp;rdquo;,&amp;ldquo;2016-11-15&amp;rdquo;],[916,309,436,377,179,259,320,1154,415,253,199,202,220,141,151,182,113,130,128,217,92,137,84,54,100,58,58,33,473,86,73,88,54,32,1,0,347,80],[1672.91666666667,255.875,250.875,215.875,222.875,250.875,258.875,389.875,254.875,237.875,200.875,223.875,320.875,171.875,182.875,228.875,150.875,165.875,157.875,129.875,115.875,218.875,113.875,218.875,166.875,83.875,54.875,38.875,253.875,771.875,111.875,207.875,69.875,119.875,31.875,8.875,911.916666666667,180.875],[-122.4194155,-74.0059413,28.9783589,2.1734035,-82.9987942,-71.0588801,-118.2436849,-0.1277583,144.9630576,2.3522219,-9.1393366,13.404954,-78.898619,-73.087749,-0.3762881,-86.7816016,-97.7430608,-93.6319131,-77.0368707,-58.3815591,-81.2452768,-2.2426305,-6.2603097,-77.042754,44.827096,138.6007456,11.5819806,-64.2912369,-3.7037902,-93.2009998,19.040235,27.142826,18.4240553,-43.1728965,-73.567256,-122.3320708,121.5654177,21.0122287],[37.7749295,40.7127837,41.0082376,41.3850639,39.9611755,42.3600825,34.0522342,51.5073509,-37.8136276,48.856614,38.7222524,52.5200066,35.9940329,41.6032207,39.4699075,36.1626638,30.267153,42.0307812,38.9071923,-34.6036844,42.9849233,53.4807593,53.3498053,-12.0463731,41.7151377,-34.9284989,48.1351253,-36.620922,40.4167754,44.9374831,47.497912,38.423734,-33.9248685,-22.9068467,45.5016889,47.6062095,25.0329694,52.2296756]],&amp;ldquo;container&amp;rdquo;:&amp;rdquo;&lt;table class=\&#34;display\&#34;&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;screen_name&amp;lt;\/th&amp;gt;\n      &lt;th&gt;location&amp;lt;\/th&amp;gt;\n      &lt;th&gt;created_at&amp;lt;\/th&amp;gt;\n      &lt;th&gt;followers&amp;lt;\/th&amp;gt;\n      &lt;th&gt;age_days&amp;lt;\/th&amp;gt;\n      &lt;th&gt;lon&amp;lt;\/th&amp;gt;\n      &lt;th&gt;lat&amp;lt;\/th&amp;gt;\n    &amp;lt;\/tr&amp;gt;\n  &amp;lt;\/thead&amp;gt;\n&amp;lt;\/table&amp;gt;&amp;ldquo;,&amp;ldquo;options&amp;rdquo;:{&amp;ldquo;pageLength&amp;rdquo;:5,&amp;ldquo;columnDefs&amp;rdquo;:[{&amp;ldquo;className&amp;rdquo;:&amp;ldquo;dt-right&amp;rdquo;,&amp;ldquo;targets&amp;rdquo;:[3,4,5,6]}],&amp;ldquo;order&amp;rdquo;:[],&amp;ldquo;autoWidth&amp;rdquo;:false,&amp;ldquo;orderClasses&amp;rdquo;:false,&amp;ldquo;lengthMenu&amp;rdquo;:[5,10,25,50,100]},&amp;ldquo;selection&amp;rdquo;:{&amp;ldquo;mode&amp;rdquo;:&amp;ldquo;multiple&amp;rdquo;,&amp;ldquo;selected&amp;rdquo;:null,&amp;ldquo;target&amp;rdquo;:&amp;ldquo;row&amp;rdquo;}},&amp;ldquo;evals&amp;rdquo;:[],&amp;ldquo;jsHooks&amp;rdquo;:[]}&lt;/script&gt;&lt;!--/html_preserve--&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
This dataframe is about R-Ladies&amp;rsquo; chapters&amp;rsquo; Twitter accounts. I want to produce a &lt;code&gt;plotly&lt;/code&gt; map where I can plot each chapter according to its location (&lt;code&gt;lon&lt;/code&gt; and &lt;code&gt;lat&lt;/code&gt;), with each point&amp;rsquo;s size indicating its number of &lt;code&gt;followers&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&#34;using-ggplotly&#34;&gt;Using ggplotly&lt;/h2&gt;

&lt;p&gt;The first thing I did was generate the map using &lt;code&gt;ggplot2&lt;/code&gt;, because &lt;code&gt;plotly&lt;/code&gt; integrates easily with it with the &lt;code&gt;ggplotly&lt;/code&gt; function. And I&amp;rsquo;m so comfortable using the &lt;code&gt;tidyverse&lt;/code&gt;, that it was the natural thing for me to do!&lt;/p&gt;

&lt;p&gt;&lt;code&gt;ggplotly&lt;/code&gt; translates the &lt;code&gt;ggplot2&lt;/code&gt; object into a &lt;code&gt;plotly&lt;/code&gt; one, displaying the aesthetic mappings in the tooltip. As I wanted to include other variables in it, I added the extra (and &lt;em&gt;unofficial&lt;/em&gt;) &lt;code&gt;text&lt;/code&gt; aesthetic for &lt;code&gt;ggplotly&lt;/code&gt; to include them. As &lt;code&gt;ggplot2&lt;/code&gt; doesn&amp;rsquo;t have a &lt;code&gt;text&lt;/code&gt; aesthetic it ignores it, but &lt;code&gt;ggplotly&lt;/code&gt; recognizes it and displays it in the tooltip.&lt;/p&gt;

&lt;p&gt;The greatest thing about the &lt;code&gt;text&lt;/code&gt; aesthetic is that you can include more than one variable outside the &lt;code&gt;ggplot&lt;/code&gt; aesthetics to display, as shown below.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(ggplot2)
library(maps)
library(ggthemes)

world &amp;lt;- ggplot() +
  borders(&amp;quot;world&amp;quot;, colour = &amp;quot;gray85&amp;quot;, fill = &amp;quot;gray80&amp;quot;) +
  theme_map()

map &amp;lt;- world +
  geom_point(aes(x = lon, y = lat,
                 text = paste(&#39;city: &#39;, location,
                              &#39;&amp;lt;br /&amp;gt; created : &#39;, created_at),
                 size = followers),
             data = rladies, colour = &#39;purple&#39;, alpha = .5) +
  scale_size_continuous(range = c(1, 8), breaks = c(250, 500, 750, 1000)) +
  labs(size = &#39;Followers&#39;)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;/post/how-to-deal-with-ggplotly-huge-maps/2017-04-26-how-to-deal-with-ggplotly-huge-maps/static_map-1.png&#34; style=&#34;margin: auto;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;This is the static map that I&amp;rsquo;m animating using &lt;code&gt;ggplotly&lt;/code&gt;, with the following code:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(plotly)

ggplotly(map, tooltip = c(&#39;text&#39;, &#39;size&#39;))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you want to see this map &lt;a href=&#34;/2017/05/huge-ggplotly-map/&#34;&gt;you can check it out here&lt;/a&gt;, but it will take a while! It is a 3.3 MB page (1.2 MB gzipped)!&lt;/p&gt;

&lt;p&gt;It&amp;rsquo;s a pretty nice map (and super easy to produce!), but it takes forever to load the HTML! And that is why I checked how the &lt;code&gt;plotly&lt;/code&gt; people make this kind of plots from scratch, and I gave it a try.&lt;/p&gt;

&lt;p&gt;It is actually pretty easy! The only thing that was not that straightforward for me was finding the chart references for customizing the maps (probably because I was doing a bad job at searching for them üò≥ ), so &lt;a href=&#34;https://plot.ly/r/reference/&#34;&gt;here is the link&lt;/a&gt;, and for the layout in particular &lt;a href=&#34;https://plot.ly/r/reference/#layout-geo/&#34;&gt;here it is this other link&lt;/a&gt; just in case you encounter the same difficulties as I did.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;g &amp;lt;- list(showframe = FALSE,
          coastlinecolor = toRGB(&amp;quot;white&amp;quot;),
          showland = TRUE,
          landcolor = toRGB(&amp;quot;gray80&amp;quot;),
          showcountries = TRUE,
          countrycolor = toRGB(&amp;quot;white&amp;quot;),
          countrywidth = 0.2,
          projection = list(type = &#39;Mercator&#39;))

plot_geo(rladies,
         marker = list(color = toRGB(&amp;quot;purple&amp;quot;),
                       opacity = 0.5,
                       line = list(color = toRGB(&amp;quot;purple&amp;quot;),
                                   width = 1.5))) %&amp;gt;%
  add_markers(x = ~lon,
              y = ~lat,
              sizes = c(1, 450),
              size = ~followers,
              hoverinfo = &amp;quot;text&amp;quot;,
              text = ~paste(&#39;city: &#39;, location,
                            &#39;&amp;lt;br /&amp;gt; created: &#39;, created_at,
                            &#39;&amp;lt;br /&amp;gt; followers: &#39;, followers)) %&amp;gt;%
  layout(geo = g)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;!--html_preserve--&gt;&lt;div id=&#34;htmlwidget-f58869de25fe8fa3f84f&#34; style=&#34;width:910px;height:520px;&#34; class=&#34;plotly html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-f58869de25fe8fa3f84f&#34;&gt;{&amp;ldquo;x&amp;rdquo;:{&amp;ldquo;layout&amp;rdquo;:{&amp;ldquo;margin&amp;rdquo;:{&amp;ldquo;b&amp;rdquo;:40,&amp;ldquo;l&amp;rdquo;:60,&amp;ldquo;t&amp;rdquo;:25,&amp;ldquo;r&amp;rdquo;:10},&amp;ldquo;mapType&amp;rdquo;:&amp;ldquo;geo&amp;rdquo;,&amp;ldquo;geo&amp;rdquo;:{&amp;ldquo;domain&amp;rdquo;:{&amp;ldquo;x&amp;rdquo;:[0,1],&amp;ldquo;y&amp;rdquo;:[0,1]},&amp;ldquo;showframe&amp;rdquo;:false,&amp;ldquo;coastlinecolor&amp;rdquo;:&amp;ldquo;rgba(255,255,255,1)&amp;rdquo;,&amp;ldquo;showland&amp;rdquo;:true,&amp;ldquo;landcolor&amp;rdquo;:&amp;ldquo;rgba(204,204,204,1)&amp;rdquo;,&amp;ldquo;showcountries&amp;rdquo;:true,&amp;ldquo;countrycolor&amp;rdquo;:&amp;ldquo;rgba(255,255,255,1)&amp;rdquo;,&amp;ldquo;countrywidth&amp;rdquo;:0.2,&amp;ldquo;projection&amp;rdquo;:{&amp;ldquo;type&amp;rdquo;:&amp;ldquo;Mercator&amp;rdquo;}}},&amp;ldquo;source&amp;rdquo;:&amp;ldquo;A&amp;rdquo;,&amp;ldquo;config&amp;rdquo;:{&amp;ldquo;modeBarButtonsToAdd&amp;rdquo;:[{&amp;ldquo;name&amp;rdquo;:&amp;ldquo;Collaborate&amp;rdquo;,&amp;ldquo;icon&amp;rdquo;:{&amp;ldquo;width&amp;rdquo;:1000,&amp;ldquo;ascent&amp;rdquo;:500,&amp;ldquo;descent&amp;rdquo;:-50,&amp;ldquo;path&amp;rdquo;:&amp;ldquo;M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z&amp;rdquo;},&amp;ldquo;click&amp;rdquo;:&amp;ldquo;function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == &amp;lsquo;?viewer_pane=1&amp;rsquo;) {\n          alert(&amp;lsquo;To learn about plotly for collaboration, visit:\n &lt;a href=&#34;https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html&#39;);n&#34;&gt;https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html&#39;);n&lt;/a&gt;        } else {\n          window.open(&amp;lsquo;&lt;a href=&#34;https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html&#39;&#34;&gt;https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html&#39;&lt;/a&gt;, &amp;lsquo;_blank&amp;rsquo;);\n        }\n      }&amp;ldquo;}],&amp;ldquo;modeBarButtonsToRemove&amp;rdquo;:[&amp;ldquo;sendDataToCloud&amp;rdquo;]},&amp;ldquo;data&amp;rdquo;:[{&amp;ldquo;marker&amp;rdquo;:{&amp;ldquo;size&amp;rdquo;:[357.398613518198,121.226169844021,170.639514731369,147.683708838822,70.6455805892548,101.772097053726,125.506065857886,450,162.468804159445,99.4376083188908,78.4272097053726,79.5944540727903,86.5979202772964,55.8604852686308,59.7512998266898,71.8128249566724,44.9662045060659,51.580589254766,50.8024263431542,85.4306759098787,36.7954939341421,54.3041594454073,33.682842287695,22.0103986135182,39.9081455805893,23.5667244367418,23.5667244367418,13.8396880415945,185.035528596187,34.4610051993068,29.4029462738302,35.2391681109185,22.0103986135182,13.4506065857886,1.38908145580589,1,136.011265164645,32.1265164644714],&amp;ldquo;sizemode&amp;rdquo;:&amp;ldquo;area&amp;rdquo;,&amp;ldquo;fillcolor&amp;rdquo;:&amp;ldquo;rgba(31,119,180,1)&amp;rdquo;,&amp;ldquo;color&amp;rdquo;:&amp;ldquo;rgba(160,32,240,1)&amp;rdquo;,&amp;ldquo;opacity&amp;rdquo;:0.5,&amp;ldquo;line&amp;rdquo;:{&amp;ldquo;color&amp;rdquo;:&amp;ldquo;rgba(160,32,240,1)&amp;rdquo;,&amp;ldquo;width&amp;rdquo;:1.5}},&amp;ldquo;type&amp;rdquo;:&amp;ldquo;scattergeo&amp;rdquo;,&amp;ldquo;mode&amp;rdquo;:&amp;ldquo;markers&amp;rdquo;,&amp;ldquo;hoverinfo&amp;rdquo;:&amp;ldquo;text&amp;rdquo;,&amp;ldquo;text&amp;rdquo;:[&amp;ldquo;city:  San Francisco &lt;br /&gt; created:  2012-10-15 &lt;br /&gt; followers:  916&amp;rdquo;,&amp;ldquo;city:  New York &lt;br /&gt; created:  2016-09-01 &lt;br /&gt; followers:  309&amp;rdquo;,&amp;ldquo;city:  ƒ∞stanbul, T√ºrkiye &lt;br /&gt; created:  2016-09-06 &lt;br /&gt; followers:  436&amp;rdquo;,&amp;ldquo;city:  Barcelona, Spain &lt;br /&gt; created:  2016-10-11 &lt;br /&gt; followers:  377&amp;rdquo;,&amp;ldquo;city:  Columbus, OH &lt;br /&gt; created:  2016-10-04 &lt;br /&gt; followers:  179&amp;rdquo;,&amp;ldquo;city:  Boston, MA &lt;br /&gt; created:  2016-09-06 &lt;br /&gt; followers:  259&amp;rdquo;,&amp;ldquo;city:  Los Angeles, CA &lt;br /&gt; created:  2016-08-29 &lt;br /&gt; followers:  320&amp;rdquo;,&amp;ldquo;city:  London, England &lt;br /&gt; created:  2016-04-20 &lt;br /&gt; followers:  1154&amp;rdquo;,&amp;ldquo;city:  Melbourne, Victoria &lt;br /&gt; created:  2016-09-02 &lt;br /&gt; followers:  415&amp;rdquo;,&amp;ldquo;city:  Paris, France &lt;br /&gt; created:  2016-09-19 &lt;br /&gt; followers:  253&amp;rdquo;,&amp;ldquo;city:  Lisbon &lt;br /&gt; created:  2016-10-26 &lt;br /&gt; followers:  199&amp;rdquo;,&amp;ldquo;city:  Berlin, Deutschland &lt;br /&gt; created:  2016-10-03 &lt;br /&gt; followers:  202&amp;rdquo;,&amp;ldquo;city:  Durham, NC &lt;br /&gt; created:  2016-06-28 &lt;br /&gt; followers:  220&amp;rdquo;,&amp;ldquo;city:  Connecticut, USA &lt;br /&gt; created:  2016-11-24 &lt;br /&gt; followers:  141&amp;rdquo;,&amp;ldquo;city:  Valencia, Espa√±a &lt;br /&gt; created:  2016-11-13 &lt;br /&gt; followers:  151&amp;rdquo;,&amp;ldquo;city:  Nashville, TN &lt;br /&gt; created:  2016-09-28 &lt;br /&gt; followers:  182&amp;rdquo;,&amp;ldquo;city:  Austin, TX &lt;br /&gt; created:  2016-12-15 &lt;br /&gt; followers:  113&amp;rdquo;,&amp;ldquo;city:  Ames, IA &lt;br /&gt; created:  2016-11-30 &lt;br /&gt; followers:  130&amp;rdquo;,&amp;ldquo;city:  Washington, DC &lt;br /&gt; created:  2016-12-08 &lt;br /&gt; followers:  128&amp;rdquo;,&amp;ldquo;city:  Buenos Aires, Argentina &lt;br /&gt; created:  2017-01-05 &lt;br /&gt; followers:  217&amp;rdquo;,&amp;ldquo;city:  London, Ontario &lt;br /&gt; created:  2017-01-19 &lt;br /&gt; followers:  92&amp;rdquo;,&amp;ldquo;city:  Manchester, England &lt;br /&gt; created:  2016-10-08 &lt;br /&gt; followers:  137&amp;rdquo;,&amp;ldquo;city:  Dublin City, Ireland &lt;br /&gt; created:  2017-01-21 &lt;br /&gt; followers:  84&amp;rdquo;,&amp;ldquo;city:  Lima, Peru &lt;br /&gt; created:  2016-10-08 &lt;br /&gt; followers:  54&amp;rdquo;,&amp;ldquo;city:  Tbilisi &lt;br /&gt; created:  2016-11-29 &lt;br /&gt; followers:  100&amp;rdquo;,&amp;ldquo;city:  Adelaide, South Australia &lt;br /&gt; created:  2017-02-20 &lt;br /&gt; followers:  58&amp;rdquo;,&amp;ldquo;city:  Munich, Bavaria &lt;br /&gt; created:  2017-03-21 &lt;br /&gt; followers:  58&amp;rdquo;,&amp;ldquo;city:  Santa Rosa, Argentina &lt;br /&gt; created:  2017-04-06 &lt;br /&gt; followers:  33&amp;rdquo;,&amp;ldquo;city:  Madrid, Spain &lt;br /&gt; created:  2016-09-03 &lt;br /&gt; followers:  473&amp;rdquo;,&amp;ldquo;city:  Twin Cities &lt;br /&gt; created:  2015-04-04 &lt;br /&gt; followers:  86&amp;rdquo;,&amp;ldquo;city:  Budapest, Magyarorsz√°g &lt;br /&gt; created:  2017-01-23 &lt;br /&gt; followers:  73&amp;rdquo;,&amp;ldquo;city:  Izmir, Turkey &lt;br /&gt; created:  2016-10-19 &lt;br /&gt; followers:  88&amp;rdquo;,&amp;ldquo;city:  Cape Town, South Africa &lt;br /&gt; created:  2017-03-06 &lt;br /&gt; followers:  54&amp;rdquo;,&amp;ldquo;city:  Rio de Janeiro, Brazil &lt;br /&gt; created:  2017-01-15 &lt;br /&gt; followers:  32&amp;rdquo;,&amp;ldquo;city:  Montreal &lt;br /&gt; created:  2017-04-13 &lt;br /&gt; followers:  1&amp;rdquo;,&amp;ldquo;city:  Seattle &lt;br /&gt; created:  2017-05-06 &lt;br /&gt; followers:  0&amp;rdquo;,&amp;ldquo;city:  Taipei &lt;br /&gt; created:  2014-11-15 &lt;br /&gt; followers:  347&amp;rdquo;,&amp;ldquo;city:  Warsaw &lt;br /&gt; created:  2016-11-15 &lt;br /&gt; followers:  80&amp;rdquo;],&amp;ldquo;geo&amp;rdquo;:&amp;ldquo;geo&amp;rdquo;,&amp;ldquo;lat&amp;rdquo;:[37.7749295,40.7127837,41.0082376,41.3850639,39.9611755,42.3600825,34.0522342,51.5073509,-37.8136276,48.856614,38.7222524,52.5200066,35.9940329,41.6032207,39.4699075,36.1626638,30.267153,42.0307812,38.9071923,-34.6036844,42.9849233,53.4807593,53.3498053,-12.0463731,41.7151377,-34.9284989,48.1351253,-36.620922,40.4167754,44.9374831,47.497912,38.423734,-33.9248685,-22.9068467,45.5016889,47.6062095,25.0329694,52.2296756],&amp;ldquo;lon&amp;rdquo;:[-122.4194155,-74.0059413,28.9783589,2.1734035,-82.9987942,-71.0588801,-118.2436849,-0.1277583,144.9630576,2.3522219,-9.1393366,13.404954,-78.898619,-73.087749,-0.3762881,-86.7816016,-97.7430608,-93.6319131,-77.0368707,-58.3815591,-81.2452768,-2.2426305,-6.2603097,-77.042754,44.827096,138.6007456,11.5819806,-64.2912369,-3.7037902,-93.2009998,19.040235,27.142826,18.4240553,-43.1728965,-73.567256,-122.3320708,121.5654177,21.0122287]}],&amp;ldquo;base_url&amp;rdquo;:&amp;ldquo;&lt;a href=&#34;https://plot.ly&amp;quot;},&amp;quot;evals&amp;quot;:[&amp;quot;config.modeBarButtonsToAdd.0.click&amp;quot;],&amp;quot;jsHooks&amp;quot;:[]&#34;&gt;https://plot.ly&amp;quot;},&amp;quot;evals&amp;quot;:[&amp;quot;config.modeBarButtonsToAdd.0.click&amp;quot;],&amp;quot;jsHooks&amp;quot;:[]&lt;/a&gt;}&lt;/script&gt;&lt;!--/html_preserve--&gt;&lt;/p&gt;

&lt;p&gt;This code produces a 16.2 KB HTML, so there I had a 99.5% reduction üéâ&lt;/p&gt;

&lt;p&gt;If you had a different experience, please let me know! You can comment below or &lt;a href=&#34;https://twitter.com/intent/tweet?user_id=114258616&#34;&gt;mention me on Twitter&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;And, if you enjoyed this article, check out &lt;a href=&#34;/2017/05/how-to-plot-animated-maps-with-gganimate/&#34;&gt;the next one of the series here!&lt;/a&gt; or &lt;a href=&#34;https://github.com/d4tagirl/R-Ladies-growth-maps&#34;&gt;the code in my GitHub repo&lt;/a&gt;. Thank you for reading üòâ&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
